# Spring BootによるAPI開発
## 目次
- 0. はじめに
- 1. Java APIの基本的な考え方
- 2. サンプルAPIのパッケージ構成および処理の概要
- 3. Spring Bootのアノテーション（注釈）
- 4. Spring Bootプロジェクトのスタートアップ

## 0. はじめに
このドキュメントは、Spring Bootを利用したAPI開発のサンプルです。<br>
JavaによるAPI開発の考え方、およびクラスやパッケージの用意の仕方の参考となることを目指しています。<br>
基礎的なJavaプログラミングに一通り触れ、より実践的な課題に取り組む前段の参考資料としてください。

## 1. Java APIの基本的な考え方
### 1-1. 開発者から見るAPI：大きな関数
関数とは、一つの値をいれると一意に値が算出されて返ってくるものですが、APIはそれの延長、つまり大きな関数です。<br>
リクエストされたJSONを関数の引数として、Controller内部で作成されたインスタンスを返却する大きな関数と捉えてください。
### 1-2. SpringフレームワークによるAPI開発
Springフレームワークのうち、特にMVCモデルを採用しているSpring Bootでは、リクエストのオブジェクト、レスポンスのオブジェクトを <br>
Controllerで定義されたメソッド、つまり関数にて処理してクライアントに返却することができます。

## 2. サンプルAPIのパッケージ構成および処理の概要
### 2-1. API処理の概要
サンプルAPIは、以下の処理を実施しています。Controllerクラスを参照してください。<br>
- JSONリクエストをクライアントから受け取り、RequestDtoにマッピングする。
- リクエストのフラグで判定して、レスポンスにそれぞれ値を設定する
- 値を設定したレスポンスをクライアントに返却する

### 2-2. パッケージ構成
サンプルのAPIは以下のパッケージおよびクラス構成を取っています。<br>
jp.co.netprotections <br>
　│ <br>
　├─ controller <br>
　│　　└ MainController.java <br>
　│ <br>
　└─ dto <br>
　　　├ RequestDto.java <br>
　　　└ ResponseDto.java <br>

## 3. Spring Bootのアノテーション（注釈）
### 3-1. アノテーションとは
Spring BootやJava言語には、人間がプログラムを読むときに参考にできるコメントのように、プログラムが実行されるときに読まれて特別な振る舞いや意味を <br>
付与することのできるアノテーション（注釈、@XXXのようなもの）が存在します。 <br>
フレームワークの開発において、アノテーションを使いこなすことで生産的で可読性の高いプログラムを開発することができます。 <br>
### 3-2. サンプルで使われるアノテーション
サンプルAPIでは、Controllerクラスで以下のアノテーションを付与しています。本格的に開発するときに参考にしてください。
- `@RestController` : Controllerクラスに付与することで、REST APIのControllerとして認識されます。
- `@RequestMapping` : メソッド名、コンテンツタイプ、URLを指定することでHTTPリクエストを処理するメソッドにすることができます。
- `@RequestBody` : REST APIのControllerのメソッドの引数に付与することで、HTTPリクエストのボディをメソッドの引数のクラスにマッピングできます。
- `@ResponseBody` : REST APIのControllerのメソッドに付与することで、HTTPレスポンスのボディにメソッドの戻り値の型をマッピングできます。

## 4. Spring Bootプロジェクトのスタートアップ
### 4-1. Eclipseワークスペースに新規プロジェクトを作成する
以下の手順で、サンプルAPIの骨子のようなプロジェクトの骨組みを作成できます。Eclipse上での作業です。
- `ファイル` -> `新規` -> `プロジェクト..`で新規作成メニューを開きます。
- 検索バーに`Spring Boot`とうち、`Springスタータープロジェクト`を選択します。
- 以下のように設定して次へを選択します。
    - 名前 : `BootCampStartup`
    - グループ : `jp.co.netprotections`
    - パッケージ : `jp.co.netprotections`
- 以下のバージョンおよび依存関係を選択してください。
    - Spgin Bootバージョン : `1.5.16` -> なければ、1.5.xx系ならどのバージョンでも大丈夫です。
    - 依存関係 :
        - Web :
            - web
            - webサービス
        - コア
            - DevTools
ここまでできたら完成なので、そのまま完了ボタンを押します。
